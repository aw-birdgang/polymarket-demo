@startuml
' == ìŠ¤íƒ€ì¼ ì„¤ì • ==
skinparam backgroundColor #FFFFFF
skinparam sequence {
    ArrowColor #4F81BD
    ActorBorderColor #2E74B5
    ParticipantBorderColor #2E74B5
    LifeLineBorderColor #D9D9D9
    LifeLineBackgroundColor #F3F9FF
    ParticipantBackgroundColor #EAF3FF
    ActorBackgroundColor #C6E2FF
    NoteBackgroundColor #FFFFCC
    NoteBorderColor #B7B7B7
    BoxBackgroundColor #F9F9F9
    MessageAlign center
    MessageFontSize 14
    ParticipantFontSize 14
}

' == ì£¼ìš” ì°¸ê°€ì ==
actor User as U #C6E2FF
participant "ğŸŒ Frontend\n(React + Ethers.js)" as FE #EAF3FF
participant "ğŸ—„ï¸ Backend\n(Node.js + API)" as BE #FFF4E6
participant "âš¡ Smart Contract\n(Solidity)" as SC #F3FFF3
participant "ğŸ“¡ UMA Optimistic Oracle" as Oracle #FDEFF9

' == ì‹œí€€ìŠ¤ ì‹œì‘ ==

title **Polymarket ì „ì²´ íë¦„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨**

== ğŸ“¦ Market Creation ==
U -> FE : 1ï¸âƒ£ Open App & Connect Wallet
FE -> BE : 2ï¸âƒ£ Request to Create Market (market info)
BE -> SC : 3ï¸âƒ£ createMarket(question, endTime)
SC --> BE : âœ… Market Created (marketId)
BE --> FE : âœ… Market Created Successfully
FE --> U : ğŸ—‚ï¸ Display Market on Dashboard

== ğŸ¯ Placing a Bet ==
U -> FE : 1ï¸âƒ£ Select Market & Place Bet (YES/NO)
FE -> U : ğŸ” Request Transaction Signature (MetaMask)
U --> FE : âœï¸ Sign Transaction
FE -> SC : 2ï¸âƒ£ placeBet(marketId, outcome) [Signed TX]
SC --> FE : âœ… Bet Placed Successfully
FE --> U : ğŸ“¢ Show Bet Confirmation

== ğŸ” Market Resolution ==
U -> FE : 1ï¸âƒ£ Check Market Result (After End Time)
FE -> BE : 2ï¸âƒ£ Request Market Resolution
BE -> SC : 3ï¸âƒ£ resolveMarket(marketId)
SC -> SC : ğŸ”„ Request Event Resolution (via OracleManager)
SC -> Oracle : ğŸ“¡ requestPrice(marketId, eventData)
note right of Oracle : â³ Verify Data + Dispute Period
Oracle --> SC : âœ… Event Outcome (YES/NO)
SC --> BE : âœ… Market Resolved (outcome)
BE --> FE : ğŸ¯ Return Market Outcome
FE --> U : ğŸ“° Display Market Result

== ğŸ’° Claiming Winnings ==
U -> FE : 1ï¸âƒ£ Claim Winnings
FE -> U : ğŸ” Request Transaction Signature (MetaMask)
U --> FE : âœï¸ Sign Transaction
FE -> SC : 2ï¸âƒ£ claimWinnings(marketId) [Signed TX]
SC --> FE : ğŸ’¸ Winnings Transferred (ETH)
FE --> U : ğŸ‰ Show Payout Confirmation

@enduml
